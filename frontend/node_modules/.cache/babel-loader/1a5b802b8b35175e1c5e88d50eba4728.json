{"ast":null,"code":"import _toConsumableArray from\"/Users/bgaldino/Documents/self-service-webstore/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/bgaldino/Documents/self-service-webstore/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bgaldino/Documents/self-service-webstore/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/bgaldino/Documents/self-service-webstore/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import Link from\"@material-ui/core/Link\";import useToken from\"./useToken\";import{Col,Container,Row}from\"react-bootstrap\";import Select from\"react-select\";import{useHistory}from\"react-router-dom\";import moment from\"moment\";// Card images\nimport mastercard from\"../images/mastercard.png\";import visa from\"../images/visa.jpg\";import diners from\"../images/diners.png\";import jcb from\"../images/jcb.png\";import maestro from\"../images/maestro.png\";import amex from\"../images/amex.png\";var BASE_URL=\"\".concat(process.env.REACT_APP_API_ENDPOINT,\"/services/data/v\").concat(process.env.REACT_APP_API_VERSION);export default function Cart(_ref){var cart=_ref.cart,setCart=_ref.setCart;var _useToken=useToken(),token=_useToken.token,setToken=_useToken.setToken;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),orderExecuting=_useState4[0],setOrderExecuting=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),paymentOptions=_useState6[0],setPaymentOptions=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedPayment=_useState8[0],setSelectedPayment=_useState8[1];var history=useHistory();// Calculate the cart sum\nvar getTotalSum=function getTotalSum(){var raw=cart.reduce(function(sum,_ref2){var netPrice=_ref2.netPrice,quantity=_ref2.quantity;return sum+netPrice*quantity;},0);return(Math.round(raw*100)/100).toFixed(2);};var clearCart=function clearCart(){setCart([]);};// Return the appropriate image for each payment method\nfunction getCardImage(card){switch(card){case\"MasterCard\":return mastercard;case\"Jcb\":return jcb;case\"Visa\":return visa;case\"AmericanExpress\":return amex;case\"Maestro\":return maestro;case\"DinersClub\":return diners;}}// Create the request body for calling the BuyNow API\nfunction constructBuyNowBody(){var effectiveDate=moment(new Date()).format(\"YYYY-MM-DD\").toString();var raw={inputs:[{order:{attributes:{type:\"Order\"},AccountId:\"\".concat(process.env.REACT_APP_ACCOUNT_ID),EffectiveDate:effectiveDate,EndDate:null,Pricebook2Id:\"\".concat(process.env.REACT_APP_PRICEBOOK_ID),Status:\"Draft\",CurrencyIsoCode:\"USD\"},orderItems:new Array(),paymentMethodId:selectedPayment.value}]};// Go through each item in the cart and create an OrderItem entry\nvar index=0;for(index;index<cart.length;index++){var product=cart[index];var entry={attributes:{type:\"OrderItem\"},UnitPrice:parseFloat(product.unitPrice),PricebookEntryId:\"\".concat(product.Id),Quantity:product.quantity,ProductSellingModelId:\"\".concat(product.ProductSellingModelId),TaxTreatmentId:\"1ttR000000001BqIAI\",CurrencyIsoCode:\"USD\"};raw.inputs[0].orderItems.push(entry);}return JSON.stringify(raw);}// SObject API call to query saved CardPaymentMethods\nfunction getPaymentMethods(){return _getPaymentMethods.apply(this,arguments);}// Call the BuyNow API\nfunction _getPaymentMethods(){_getPaymentMethods=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var requestHeaders,requestOptions;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:requestHeaders=new Headers();requestHeaders.append(\"Authorization\",\"Bearer \"+token);requestHeaders.append(\"Content-Type\",\"application/json\");requestOptions={method:\"GET\",headers:requestHeaders,redirect:\"follow\"};_context2.next=6;return fetch(\"\".concat(BASE_URL,\"/queryAll/?q=SELECT CardCategory,CardHolderFirstName,CardHolderLastName,CardLastFour,CardTypeCategory,NickName,Status,Id FROM CardPaymentMethod WHERE Status = 'Active'\"),requestOptions).then(function(response){return response.text();}).then(function(result){var payments=JSON.parse(result).records;var options=new Array();// Use the result to populate the picklist of payment methods\n// Use the result to populate the picklist of payment methods\nfor(var i=0;i<payments.length;i++){var card=payments[i];options.push({value:card.Id,label:/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:getCardImage(card.CardTypeCategory),style:{width:\"10%\"}}),\" \",card.CardTypeCategory,\" x\",card.CardLastFour)});}if(options.length>0){setSelectedPayment(options[0]);}setPaymentOptions(options);}).catch(function(error){return console.log(\"error\",error);});case 6:case\"end\":return _context2.stop();}}},_callee2);}));return _getPaymentMethods.apply(this,arguments);}var executeBuyNow=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var requestHeaders,requestBody,requestOptions;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(paymentOptions.length==0||selectedPayment==null)){_context.next=3;break;}alert(\"No payment method selected. Please try again.\");return _context.abrupt(\"return\");case 3:setOrderExecuting(true);requestHeaders=new Headers();requestHeaders.append(\"Authorization\",\"Bearer \"+token);requestHeaders.append(\"Content-Type\",\"application/json\");requestBody=constructBuyNowBody();requestOptions={method:\"POST\",headers:requestHeaders,body:requestBody,redirect:\"follow\"};_context.next=11;return fetch(\"\".concat(BASE_URL,\"/actions/custom/flow/Buy_Now_Assets_Final\"),requestOptions).then(function(response){return response.text();}).then(function(result){var orderInfo=JSON.parse(result)[0];if(orderInfo.isSuccess){var orderNumber=orderInfo.outputValues.orderOutput.OrderNumber;setOrderExecuting(false);clearCart();// Redirect to order confirmation page upon success\n// Redirect to order confirmation page upon success\nhistory.push(\"/confirmation/\".concat(orderNumber));}else{console.log(orderInfo);setOrderExecuting(false);alert(\"Order unsucccessful. Please try again.\");}}).catch(function(error){return console.log(\"error\",error);});case 11:case\"end\":return _context.stop();}}},_callee);}));return function executeBuyNow(){return _ref3.apply(this,arguments);};}();// Creates the request body for the pricing engine API using all pricebook entries\nfunction constructPricingBody(){var raw={listPricebookId:\"\".concat(process.env.REACT_APP_PRICEBOOK_ID),candidatePricebookIds:[\"\".concat(process.env.REACT_APP_PRICEBOOK_ID)],pricingFlow:\"GET_FINAL_PRICE\",roundingMode:\"RoundHalfUp\",graph:{graphId:\"1\",records:[{referenceId:\"ref_sales_txn\",record:{attributes:{type:\"SalesTransaction\"},CurrencyIsoCode:\"USD\"}}]}};// Go through pricebook entries and construct a request for each one\nvar index=1;for(index;index<=cart.length;index++){var product=cart[index-1];var entry={referenceId:\"ref_sales_txn_item\"+index,record:{attributes:{type:\"SalesTransactionItem\"},CurrencyIsoCode:\"USD\",SalesTransactionId:\"@{ref_sales_txn.Id}\",ProductId:product.Product2Id,Quantity:\"\".concat(product.quantity),ProductSellingModelId:product.ProductSellingModelId}};raw.graph.records.push(entry);}return JSON.stringify(raw);}// Call the pricing engine API to calculate final prices for all cart items\nfunction getPrices(){return _getPrices.apply(this,arguments);}function _getPrices(){_getPrices=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var requestHeaders,requestBody,requestOptions;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:requestHeaders=new Headers();requestHeaders.append(\"Authorization\",\"Bearer \"+token);requestHeaders.append(\"Content-Type\",\"application/json\");requestBody=constructPricingBody();requestOptions={method:\"POST\",headers:requestHeaders,body:requestBody,redirect:\"follow\"};setLoading(true);_context3.next=8;return fetch(\"\".concat(BASE_URL,\"/commerce/pricing/salestransaction/actions/calculate-price\"),requestOptions).then(function(response){return response.text();}).then(function(result){var pricingData=JSON.parse(result);var index=1;var adjustmentIndex=index+cart.length;for(index;index<=cart.length;index++){var product=cart[index-1];var unitPrice=pricingData.records[index].record.ListPrice;var netPrice=pricingData.records[index].record.NetUnitPrice;var totalPrice=pricingData.records[index].record.TotalPrice;var adjustment=pricingData.records[index].record.TotalAdjustmentAmount;// Round and format prices\n// Round and format prices\nproduct.unitPrice=(Math.round(unitPrice*100)/100).toFixed(2);product.netPrice=(Math.round(netPrice*100)/100).toFixed(2);product.adjustment=(Math.round(adjustment*100)/100).toFixed(2);product.totalPrice=(product.netPrice*product.quantity).toFixed(2);product.priceChange=(Math.round(Math.abs(unitPrice-netPrice)*100)/100).toFixed(2);// Handle any adjustments\n// Handle any adjustments\nif(adjustment!=0){var priceAdjustmentItem=pricingData.records[adjustmentIndex];product.adjustmentDesc=priceAdjustmentItem.record.Description;// Description/reason for adjustment\n// Description/reason for adjustment\nvar adjustmentVal=priceAdjustmentItem.record.AdjustmentValue;// Amount\n// Amount\nvar adjustmentType=priceAdjustmentItem.record.AdjustmentType;// Type\n// Type\nvar totalAdjustment=priceAdjustmentItem.record.TotalAmount;// Create a string to render the adjustment details\n// Create a string to render the adjustment details\nvar adjustmentString=\"\";switch(adjustmentType){case\"AdjustmentPercentage\":adjustmentString+=Math.abs(adjustmentVal).toString()+\"%\";break;case\"AdjustmentAmount\":adjustmentString+=\"$\"+(Math.round(Math.abs(adjustmentVal)*100)/100).toFixed(2).toString();break;}if(totalAdjustment>0){adjustmentString+=\" addl. charge\";}else{adjustmentString+=\" off\";}product.adjustmentString=adjustmentString;adjustmentIndex++;}}}).catch(function(error){return console.log(\"error\",error);});case 8:case\"end\":return _context3.stop();}}},_callee3);}));return _getPrices.apply(this,arguments);}function populateData(){return _populateData.apply(this,arguments);}// Swap wording for terms\nfunction _populateData(){_populateData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getPrices();case 2:_context4.next=4;return getPaymentMethods();case 4:setLoading(false);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return _populateData.apply(this,arguments);}function convertUnitTerm(term){switch(term){case\"Days\":return\"daily\";case\"Months\":return\"monthly\";case\"Years\":return\"yearly\";}return term;}useEffect(function(){populateData();localStorage.setItem(\"cart\",JSON.stringify(cart));},[cart]);// Update item quantities\nvar setQuantity=function setQuantity(prod,amount){var newCart=_toConsumableArray(cart);newCart.find(function(product){return product.Name===prod.Name;}).quantity=amount;setCart(newCart);};var removeFromCart=function removeFromCart(productToRemove){setCart(cart.filter(function(product){return product!==productToRemove;}));};return/*#__PURE__*/React.createElement(React.Fragment,null,loading?/*#__PURE__*/React.createElement(\"img\",{style:{margin:\"auto\",display:\"flex\"},src:\"https://miro.medium.com/max/1080/0*DqHGYPBA-ANwsma2.gif\"}):/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"page-header\"},/*#__PURE__*/React.createElement(\"div\",{style:{'padding-left':'1em'}},/*#__PURE__*/React.createElement(\"h5\",null,\"Cart\"),\"Here is what you've added so far.\")),/*#__PURE__*/React.createElement(\"div\",null,cart.map(function(product,idx){return/*#__PURE__*/React.createElement(\"ul\",{className:\"collection\",style:{width:\"100%\",margin:\"auto\"}},/*#__PURE__*/React.createElement(\"li\",{className:\"collection-item\",key:product.Id},/*#__PURE__*/React.createElement(Container,{style:{width:\"100%\"}},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{className:\"cart-col\",style:{width:\"10%\",position:\"relative\"}},product.img&&/*#__PURE__*/React.createElement(\"img\",{src:product.img,alt:product.img,style:{width:\"75%\",margin:\"0\",position:\"absolute\",transform:\"translateY(50%)\",top:\"50%\"}})),/*#__PURE__*/React.createElement(Col,{className:\"cart-col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"item-desc\"},/*#__PURE__*/React.createElement(\"h5\",{style:{overflowWrap:\"break-word\"}},product.Name),product.adjustment==0?/*#__PURE__*/React.createElement(\"b\",null,\"Price: $\",product.unitPrice,\" \",product.sellingModel==\"Evergreen\"&&/*#__PURE__*/React.createElement(\"span\",null,convertUnitTerm(product.pricingTermUnit))):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",null,\"Unit price: $\",product.unitPrice),/*#__PURE__*/React.createElement(\"br\",null)),product.adjustment>0&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"green\"}},\"Surcharges: +$\",product.priceChange,/*#__PURE__*/React.createElement(\"span\",null,\" \",\"(\",product.adjustmentString,\" -\",\" \",product.adjustmentDesc,\")\")),product.adjustment<0&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Discounts: -$\",product.priceChange,/*#__PURE__*/React.createElement(\"span\",null,\" \",\"(\",product.adjustmentString,\" -\",\" \",product.adjustmentDesc,\")\")),/*#__PURE__*/React.createElement(\"p\",null,product.adjustment!=0&&/*#__PURE__*/React.createElement(\"b\",null,\"Price: $\",product.netPrice,\" \",product.sellingModel==\"Evergreen\"&&/*#__PURE__*/React.createElement(\"span\",null,convertUnitTerm(product.pricingTermUnit)),\" \",product.sellingModel===\"TermDefined\"&&/*#__PURE__*/React.createElement(\"span\",null,\"for \",product.pricingTerm,\" \",product.pricingTermUnit.toLowerCase()))))),/*#__PURE__*/React.createElement(Col,{className:\"cart-col col-center\",style:{marginTop:\"2%\"}},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Quantity: \",product.quantity)),/*#__PURE__*/React.createElement(\"div\",{className:\"add-remove\"},/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\",style:{color:\"#039be5\"},onClick:function onClick(){setQuantity(product,product.quantity+1);}},\"add\")),/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\",style:{color:\"#039be5\"},onClick:function onClick(){product.quantity==1?removeFromCart(product):setQuantity(product,product.quantity-1);}},\"remove\")))),/*#__PURE__*/React.createElement(Col,{className:\"cart-col col-center\",style:{position:\"absolute\",left:\"73%\"}},/*#__PURE__*/React.createElement(\"b\",{style:{marginBottom:\"5%\",marginTop:\"10%\"}},\"Total: $\",product.totalPrice),/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons md-18\",style:{color:\"#039be5\"},onClick:function onClick(){removeFromCart(product);}},\"delete\")))))));})),cart.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"container\",style:{width:'100%'}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"li\",{style:{textAlign:\"right\",display:\"grid\",padding:\"2%\"}},/*#__PURE__*/React.createElement(\"h5\",null,\"Total: $\",getTotalSum())),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"30%\",float:\"right\"}},/*#__PURE__*/React.createElement(\"p\",{style:{textAlign:\"center\"}},\"Saved Payment Methods\"),/*#__PURE__*/React.createElement(Select,{defaultValue:paymentOptions[0]||\"N/A\",onChange:setSelectedPayment,options:paymentOptions,menuPortalTarget:document.body,menuPosition:\"fixed\",isSearchable:false}),\" \"))),!orderExecuting?/*#__PURE__*/React.createElement(\"div\",{className:\"checkout\",style:{display:\"flex\",alignItems:\"center\",flexDirection:\"row-reverse\",marginBottom:\"10%\"}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"waves-effect waves-light red btn\",style:{margin:\"1vh\"},onClick:clearCart},\"Clear Cart\"),/*#__PURE__*/React.createElement(\"button\",{className:\"waves-effect waves-light green btn\",onClick:executeBuyNow},\"Buy Now\"))):/*#__PURE__*/React.createElement(\"div\",{style:{float:\"right\",width:\"30%\"}},/*#__PURE__*/React.createElement(\"h5\",{style:{textAlign:\"center\"}},\"Placing order...\"),/*#__PURE__*/React.createElement(\"img\",{style:{margin:\"auto\",display:\"flex\",width:\"60%\"},src:\"https://miro.medium.com/max/1080/0*DqHGYPBA-ANwsma2.gif\"}))):/*#__PURE__*/React.createElement(\"h5\",{style:{textAlign:\"center\",padding:\"5%\"}},\"Cart is empty.\")));}","map":{"version":3,"sources":["/Users/bgaldino/Documents/self-service-webstore/frontend/src/components/Cart.js"],"names":["React","useEffect","useState","Link","useToken","Col","Container","Row","Select","useHistory","moment","mastercard","visa","diners","jcb","maestro","amex","BASE_URL","process","env","REACT_APP_API_ENDPOINT","REACT_APP_API_VERSION","Cart","cart","setCart","token","setToken","loading","setLoading","orderExecuting","setOrderExecuting","paymentOptions","setPaymentOptions","selectedPayment","setSelectedPayment","history","getTotalSum","raw","reduce","sum","netPrice","quantity","Math","round","toFixed","clearCart","getCardImage","card","constructBuyNowBody","effectiveDate","Date","format","toString","inputs","order","attributes","type","AccountId","REACT_APP_ACCOUNT_ID","EffectiveDate","EndDate","Pricebook2Id","REACT_APP_PRICEBOOK_ID","Status","CurrencyIsoCode","orderItems","Array","paymentMethodId","value","index","length","product","entry","UnitPrice","parseFloat","unitPrice","PricebookEntryId","Id","Quantity","ProductSellingModelId","TaxTreatmentId","push","JSON","stringify","getPaymentMethods","requestHeaders","Headers","append","requestOptions","method","headers","redirect","fetch","then","response","text","result","payments","parse","records","options","i","label","CardTypeCategory","width","CardLastFour","catch","error","console","log","executeBuyNow","alert","requestBody","body","orderInfo","isSuccess","orderNumber","outputValues","orderOutput","OrderNumber","constructPricingBody","listPricebookId","candidatePricebookIds","pricingFlow","roundingMode","graph","graphId","referenceId","record","SalesTransactionId","ProductId","Product2Id","getPrices","pricingData","adjustmentIndex","ListPrice","NetUnitPrice","totalPrice","TotalPrice","adjustment","TotalAdjustmentAmount","priceChange","abs","priceAdjustmentItem","adjustmentDesc","Description","adjustmentVal","AdjustmentValue","adjustmentType","AdjustmentType","totalAdjustment","TotalAmount","adjustmentString","populateData","convertUnitTerm","term","localStorage","setItem","setQuantity","prod","amount","newCart","find","Name","removeFromCart","productToRemove","filter","margin","display","map","idx","position","img","transform","top","overflowWrap","sellingModel","pricingTermUnit","color","pricingTerm","toLowerCase","marginTop","left","marginBottom","textAlign","padding","float","document","alignItems","flexDirection"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport useToken from \"./useToken\";\r\nimport { Col, Container, Row } from \"react-bootstrap\";\r\nimport Select from \"react-select\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\n\r\n// Card images\r\nimport mastercard from \"../images/mastercard.png\";\r\nimport visa from \"../images/visa.jpg\";\r\nimport diners from \"../images/diners.png\";\r\nimport jcb from \"../images/jcb.png\";\r\nimport maestro from \"../images/maestro.png\";\r\nimport amex from \"../images/amex.png\";\r\n\r\nconst BASE_URL = `${process.env.REACT_APP_API_ENDPOINT}/services/data/v${process.env.REACT_APP_API_VERSION}`;\r\n\r\nexport default function Cart({ cart, setCart }) {\r\n  const { token, setToken } = useToken();\r\n  const [loading, setLoading] = useState(true);\r\n  const [orderExecuting, setOrderExecuting] = useState(false);\r\n\r\n  const [paymentOptions, setPaymentOptions] = useState();\r\n  const [selectedPayment, setSelectedPayment] = useState(null);\r\n  const history = useHistory();\r\n\r\n  // Calculate the cart sum\r\n  const getTotalSum = () => {\r\n    let raw = cart.reduce(\r\n      (sum, { netPrice, quantity }) => sum + netPrice * quantity,\r\n      0\r\n    );\r\n    return (Math.round(raw * 100) / 100).toFixed(2);\r\n  };\r\n\r\n  const clearCart = () => {\r\n    setCart([]);\r\n  };\r\n\r\n  // Return the appropriate image for each payment method\r\n  function getCardImage(card) {\r\n    switch (card) {\r\n      case \"MasterCard\":\r\n        return mastercard;\r\n      case \"Jcb\":\r\n        return jcb;\r\n      case \"Visa\":\r\n        return visa;\r\n      case \"AmericanExpress\":\r\n        return amex;\r\n      case \"Maestro\":\r\n        return maestro;\r\n      case \"DinersClub\":\r\n        return diners;\r\n    }\r\n  }\r\n\r\n  // Create the request body for calling the BuyNow API\r\n  function constructBuyNowBody() {\r\n    let effectiveDate = moment(new Date()).format(\"YYYY-MM-DD\").toString();\r\n    let raw = {\r\n      inputs: [\r\n        {\r\n          order: {\r\n            attributes: {\r\n              type: \"Order\",\r\n            },\r\n            AccountId: `${process.env.REACT_APP_ACCOUNT_ID}`,\r\n            EffectiveDate: effectiveDate,\r\n            EndDate: null,\r\n            Pricebook2Id: `${process.env.REACT_APP_PRICEBOOK_ID}`,\r\n            Status: \"Draft\",\r\n            CurrencyIsoCode: \"USD\",\r\n          },\r\n          orderItems: new Array(),\r\n          paymentMethodId: selectedPayment.value,\r\n        },\r\n      ],\r\n    };\r\n    // Go through each item in the cart and create an OrderItem entry\r\n    let index = 0;\r\n    for (index; index < cart.length; index++) {\r\n      let product = cart[index];\r\n      let entry = {\r\n        attributes: {\r\n          type: \"OrderItem\",\r\n        },\r\n        UnitPrice: parseFloat(product.unitPrice),\r\n        PricebookEntryId: `${product.Id}`,\r\n        Quantity: product.quantity,\r\n        ProductSellingModelId: `${product.ProductSellingModelId}`,\r\n        TaxTreatmentId: \"1ttR000000001BqIAI\",\r\n        CurrencyIsoCode: \"USD\",\r\n      };\r\n      raw.inputs[0].orderItems.push(entry);\r\n    }\r\n    return JSON.stringify(raw);\r\n  }\r\n\r\n  // SObject API call to query saved CardPaymentMethods\r\n  async function getPaymentMethods() {\r\n    let requestHeaders = new Headers();\r\n    requestHeaders.append(\"Authorization\", \"Bearer \" + token);\r\n    requestHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n    let requestOptions = {\r\n      method: \"GET\",\r\n      headers: requestHeaders,\r\n      redirect: \"follow\",\r\n    };\r\n\r\n    await fetch(\r\n      `${BASE_URL}/queryAll/?q=SELECT CardCategory,CardHolderFirstName,CardHolderLastName,CardLastFour,CardTypeCategory,NickName,Status,Id FROM CardPaymentMethod WHERE Status = 'Active'`,\r\n      requestOptions\r\n    )\r\n      .then((response) => response.text())\r\n      .then((result) => {\r\n        let payments = JSON.parse(result).records;\r\n        let options = new Array();\r\n        // Use the result to populate the picklist of payment methods\r\n        for (let i = 0; i < payments.length; i++) {\r\n          let card = payments[i];\r\n          options.push({\r\n            value: card.Id,\r\n            label: (\r\n              <div>\r\n                <img\r\n                  src={getCardImage(card.CardTypeCategory)}\r\n                  style={{ width: \"10%\" }}\r\n                />{\" \"}\r\n                {card.CardTypeCategory} x{card.CardLastFour}\r\n              </div>\r\n            ),\r\n          });\r\n        }\r\n        if (options.length > 0) {\r\n          setSelectedPayment(options[0]);\r\n        }\r\n        setPaymentOptions(options);\r\n      })\r\n      .catch((error) => console.log(\"error\", error));\r\n  }\r\n\r\n  // Call the BuyNow API\r\n  const executeBuyNow = async () => {\r\n    if (paymentOptions.length == 0 || selectedPayment == null) {\r\n      alert(\"No payment method selected. Please try again.\");\r\n      return;\r\n    }\r\n    setOrderExecuting(true);\r\n    let requestHeaders = new Headers();\r\n    requestHeaders.append(\"Authorization\", \"Bearer \" + token);\r\n    requestHeaders.append(\"Content-Type\", \"application/json\");\r\n    let requestBody = constructBuyNowBody();\r\n    let requestOptions = {\r\n      method: \"POST\",\r\n      headers: requestHeaders,\r\n      body: requestBody,\r\n      redirect: \"follow\",\r\n    };\r\n    await fetch(\r\n      `${BASE_URL}/actions/custom/flow/Buy_Now_Assets_Final`,\r\n      requestOptions\r\n    )\r\n      .then((response) => response.text())\r\n      .then((result) => {\r\n        let orderInfo = JSON.parse(result)[0];\r\n        if (orderInfo.isSuccess) {\r\n          let orderNumber = orderInfo.outputValues.orderOutput.OrderNumber;\r\n          setOrderExecuting(false);\r\n          clearCart();\r\n          // Redirect to order confirmation page upon success\r\n          history.push(`/confirmation/${orderNumber}`);\r\n        } else {\r\n          console.log(orderInfo);\r\n          setOrderExecuting(false);\r\n          alert(\"Order unsucccessful. Please try again.\");\r\n        }\r\n      })\r\n      .catch((error) => console.log(\"error\", error));\r\n  };\r\n\r\n  // Creates the request body for the pricing engine API using all pricebook entries\r\n  function constructPricingBody() {\r\n    let raw = {\r\n      listPricebookId: `${process.env.REACT_APP_PRICEBOOK_ID}`,\r\n      candidatePricebookIds: [`${process.env.REACT_APP_PRICEBOOK_ID}`],\r\n      pricingFlow: \"GET_FINAL_PRICE\",\r\n      roundingMode: \"RoundHalfUp\",\r\n      graph: {\r\n        graphId: \"1\",\r\n        records: [\r\n          {\r\n            referenceId: \"ref_sales_txn\",\r\n            record: {\r\n              attributes: {\r\n                type: \"SalesTransaction\",\r\n              },\r\n              CurrencyIsoCode: \"USD\",\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    };\r\n\r\n    // Go through pricebook entries and construct a request for each one\r\n    let index = 1;\r\n    for (index; index <= cart.length; index++) {\r\n      let product = cart[index - 1];\r\n      let entry = {\r\n        referenceId: \"ref_sales_txn_item\" + index,\r\n        record: {\r\n          attributes: {\r\n            type: \"SalesTransactionItem\",\r\n          },\r\n          CurrencyIsoCode: \"USD\",\r\n          SalesTransactionId: \"@{ref_sales_txn.Id}\",\r\n          ProductId: product.Product2Id,\r\n          Quantity: `${product.quantity}`,\r\n          ProductSellingModelId: product.ProductSellingModelId,\r\n        },\r\n      };\r\n      raw.graph.records.push(entry);\r\n    }\r\n    return JSON.stringify(raw);\r\n  }\r\n\r\n  // Call the pricing engine API to calculate final prices for all cart items\r\n  async function getPrices() {\r\n    let requestHeaders = new Headers();\r\n    requestHeaders.append(\"Authorization\", \"Bearer \" + token);\r\n    requestHeaders.append(\"Content-Type\", \"application/json\");\r\n    let requestBody = constructPricingBody();\r\n\r\n    let requestOptions = {\r\n      method: \"POST\",\r\n      headers: requestHeaders,\r\n      body: requestBody,\r\n      redirect: \"follow\",\r\n    };\r\n\r\n    setLoading(true);\r\n    await fetch(\r\n      `${BASE_URL}/commerce/pricing/salestransaction/actions/calculate-price`,\r\n      requestOptions\r\n    )\r\n      .then((response) => response.text())\r\n      .then((result) => {\r\n        let pricingData = JSON.parse(result);\r\n        let index = 1;\r\n        let adjustmentIndex = index + cart.length;\r\n        for (index; index <= cart.length; index++) {\r\n          let product = cart[index - 1];\r\n\r\n          let unitPrice = pricingData.records[index].record.ListPrice;\r\n          let netPrice = pricingData.records[index].record.NetUnitPrice;\r\n          let totalPrice = pricingData.records[index].record.TotalPrice;\r\n\r\n          let adjustment =\r\n            pricingData.records[index].record.TotalAdjustmentAmount;\r\n          // Round and format prices\r\n          product.unitPrice = (Math.round(unitPrice * 100) / 100).toFixed(2);\r\n          product.netPrice = (Math.round(netPrice * 100) / 100).toFixed(2);\r\n          product.adjustment = (Math.round(adjustment * 100) / 100).toFixed(2);\r\n          product.totalPrice = (product.netPrice * product.quantity).toFixed(2);\r\n          product.priceChange = (\r\n            Math.round(Math.abs(unitPrice - netPrice) * 100) / 100\r\n          ).toFixed(2);\r\n\r\n          // Handle any adjustments\r\n          if (adjustment != 0) {\r\n            let priceAdjustmentItem = pricingData.records[adjustmentIndex];\r\n\r\n            product.adjustmentDesc = priceAdjustmentItem.record.Description; // Description/reason for adjustment\r\n            let adjustmentVal = priceAdjustmentItem.record.AdjustmentValue; // Amount\r\n            let adjustmentType = priceAdjustmentItem.record.AdjustmentType; // Type\r\n            let totalAdjustment = priceAdjustmentItem.record.TotalAmount;\r\n            // Create a string to render the adjustment details\r\n            let adjustmentString = \"\";\r\n            switch (adjustmentType) {\r\n              case \"AdjustmentPercentage\":\r\n                adjustmentString += Math.abs(adjustmentVal).toString() + \"%\";\r\n                break;\r\n              case \"AdjustmentAmount\":\r\n                adjustmentString +=\r\n                  \"$\" +\r\n                  (Math.round(Math.abs(adjustmentVal) * 100) / 100)\r\n                    .toFixed(2)\r\n                    .toString();\r\n                break;\r\n            }\r\n            if (totalAdjustment > 0) {\r\n              adjustmentString += \" addl. charge\";\r\n            } else {\r\n              adjustmentString += \" off\";\r\n            }\r\n            product.adjustmentString = adjustmentString;\r\n            adjustmentIndex++;\r\n          }\r\n        }\r\n      })\r\n      .catch((error) => console.log(\"error\", error));\r\n  }\r\n\r\n  async function populateData() {\r\n    await getPrices();\r\n    await getPaymentMethods();\r\n    setLoading(false);\r\n  }\r\n\r\n  // Swap wording for terms\r\n  function convertUnitTerm(term) {\r\n    switch (term) {\r\n      case \"Days\":\r\n        return \"daily\";\r\n      case \"Months\":\r\n        return \"monthly\";\r\n      case \"Years\":\r\n        return \"yearly\";\r\n    }\r\n    return term;\r\n  }\r\n\r\n  useEffect(() => {\r\n    populateData();\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n  }, [cart]);\r\n\r\n  // Update item quantities\r\n  const setQuantity = (prod, amount) => {\r\n    const newCart = [...cart];\r\n    newCart.find((product) => product.Name === prod.Name).quantity = amount;\r\n    setCart(newCart);\r\n  };\r\n\r\n  const removeFromCart = (productToRemove) => {\r\n    setCart(cart.filter((product) => product !== productToRemove));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {loading ? (\r\n        <img\r\n          style={{ margin: \"auto\", display: \"flex\" }}\r\n          src=\"https://miro.medium.com/max/1080/0*DqHGYPBA-ANwsma2.gif\"\r\n        />\r\n      ) : (\r\n        <div className=\"container\">\r\n          <div className=\"page-header\">\r\n            <div style={{'padding-left': '1em'}}>\r\n              <h5>Cart</h5>\r\n              Here is what you've added so far.\r\n            </div>\r\n          </div>\r\n          <div>\r\n            {cart.map((product, idx) => (\r\n              <ul\r\n                className=\"collection\"\r\n                style={{ width: \"100%\", margin: \"auto\" }}\r\n              >\r\n                <li className=\"collection-item\" key={product.Id}>\r\n                  <Container style={{ width: \"100%\" }}>\r\n                    <Row>\r\n                      <Col\r\n                        className=\"cart-col\"\r\n                        style={{ width: \"10%\", position: \"relative\" }}\r\n                      >\r\n                        {product.img && (\r\n                          <img\r\n                            src={product.img}\r\n                            alt={product.img}\r\n                            style={{\r\n                              width: \"75%\",\r\n                              margin: \"0\",\r\n                              position: \"absolute\",\r\n                              transform: \"translateY(50%)\",\r\n                              top: \"50%\",\r\n                            }}\r\n                          />\r\n                        )}\r\n                      </Col>\r\n                      <Col className=\"cart-col\">\r\n                        <div className=\"item-desc\">\r\n                          <h5 style={{ overflowWrap: \"break-word\" }}>\r\n                            {product.Name}\r\n                          </h5>\r\n                          {product.adjustment == 0 ? (\r\n                            <b>\r\n                              Price: ${product.unitPrice}{\" \"}\r\n                              {product.sellingModel == \"Evergreen\" && (\r\n                                <span>\r\n                                  {convertUnitTerm(product.pricingTermUnit)}\r\n                                </span>\r\n                              )}\r\n                            </b>\r\n                          ) : (\r\n                            <div>\r\n                              <span>Unit price: ${product.unitPrice}</span>\r\n                              <br />\r\n                            </div>\r\n                          )}\r\n                          {product.adjustment > 0 && (\r\n                            <span style={{ color: \"green\" }}>\r\n                              Surcharges: +$\r\n                              {product.priceChange}\r\n                              <span>\r\n                                {\" \"}\r\n                                ({product.adjustmentString} -{\" \"}\r\n                                {product.adjustmentDesc})\r\n                              </span>\r\n                            </span>\r\n                          )}\r\n                          {product.adjustment < 0 && (\r\n                            <span style={{ color: \"red\" }}>\r\n                              Discounts: -$\r\n                              {product.priceChange}\r\n                              <span>\r\n                                {\" \"}\r\n                                ({product.adjustmentString} -{\" \"}\r\n                                {product.adjustmentDesc})\r\n                              </span>\r\n                            </span>\r\n                          )}\r\n                          <p>\r\n                            {product.adjustment != 0 && (\r\n                              <b>\r\n                                Price: ${product.netPrice}{\" \"}\r\n                                {product.sellingModel == \"Evergreen\" && (\r\n                                  <span>\r\n                                    {convertUnitTerm(product.pricingTermUnit)}\r\n                                  </span>\r\n                                )}{\" \"}\r\n                                {product.sellingModel === \"TermDefined\" && (\r\n                                  <span>\r\n                                    for {product.pricingTerm}{\" \"}\r\n                                    {product.pricingTermUnit.toLowerCase()}\r\n                                  </span>\r\n                                )}\r\n                              </b>\r\n                            )}\r\n                          </p>\r\n                        </div>\r\n                      </Col>\r\n                      <Col\r\n                        className=\"cart-col col-center\"\r\n                        style={{ marginTop: \"2%\" }}\r\n                      >\r\n                        <p>\r\n                          <b>Quantity: {product.quantity}</b>\r\n                        </p>\r\n                        <div className=\"add-remove\">\r\n                          <Link to=\"/\">\r\n                            <i\r\n                              className=\"material-icons\"\r\n                              style={{ color: \"#039be5\" }}\r\n                              onClick={() => {\r\n                                setQuantity(product, product.quantity + 1);\r\n                              }}\r\n                            >\r\n                              add\r\n                            </i>\r\n                          </Link>\r\n                          <Link to=\"/\">\r\n                            <i\r\n                              className=\"material-icons\"\r\n                              style={{ color: \"#039be5\" }}\r\n                              onClick={() => {\r\n                                product.quantity == 1\r\n                                  ? removeFromCart(product)\r\n                                  : setQuantity(product, product.quantity - 1);\r\n                              }}\r\n                            >\r\n                              remove\r\n                            </i>\r\n                          </Link>\r\n                        </div>\r\n                      </Col>\r\n                      <Col\r\n                        className=\"cart-col col-center\"\r\n                        style={{ position: \"absolute\", left: \"73%\" }}\r\n                      >\r\n                        <b style={{ marginBottom: \"5%\", marginTop: \"10%\" }}>\r\n                          Total: ${product.totalPrice}\r\n                        </b>\r\n                        <Link to=\"/\">\r\n                          <i\r\n                            className=\"material-icons md-18\"\r\n                            style={{ color: \"#039be5\" }}\r\n                            onClick={() => {\r\n                              removeFromCart(product);\r\n                            }}\r\n                          >\r\n                            delete\r\n                          </i>\r\n                        </Link>\r\n                      </Col>\r\n                    </Row>\r\n                  </Container>\r\n                </li>\r\n              </ul>\r\n            ))}\r\n          </div>\r\n          {cart.length > 0 ? (\r\n            <div className=\"container\" style={{width: '100%'}}>\r\n              <div>\r\n                <Row>\r\n                  <li\r\n                    style={{\r\n                      textAlign: \"right\",\r\n                      display: \"grid\",\r\n                      padding: \"2%\",\r\n                    }}\r\n                  >\r\n                    <h5>Total: ${getTotalSum()}</h5>\r\n                  </li>\r\n\r\n                  <div style={{ width: \"30%\", float: \"right\" }}>\r\n                    <p style={{ textAlign: \"center\" }}>Saved Payment Methods</p>\r\n                    <Select\r\n                      defaultValue={paymentOptions[0] || \"N/A\"}\r\n                      onChange={setSelectedPayment}\r\n                      options={paymentOptions}\r\n                      menuPortalTarget={document.body}\r\n                      menuPosition={\"fixed\"}\r\n                      isSearchable={false}\r\n                    />{\" \"}\r\n                  </div>\r\n                </Row>\r\n              </div>\r\n\r\n              {!orderExecuting ? (\r\n                <div\r\n                  className=\"checkout\"\r\n                  style={{\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    flexDirection: \"row-reverse\",\r\n                    marginBottom: \"10%\",\r\n                  }}\r\n                >\r\n                  <div>\r\n                    <button\r\n                      className=\"waves-effect waves-light red btn\"\r\n                      style={{ margin: \"1vh\" }}\r\n                      onClick={clearCart}\r\n                    >\r\n                      Clear Cart\r\n                    </button>\r\n                    <button\r\n                      className=\"waves-effect waves-light green btn\"\r\n                      onClick={executeBuyNow}\r\n                    >\r\n                      Buy Now\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div style={{ float: \"right\", width: \"30%\" }}>\r\n                  <h5 style={{ textAlign: \"center\" }}>Placing order...</h5>\r\n                  <img\r\n                    style={{ margin: \"auto\", display: \"flex\", width: \"60%\" }}\r\n                    src=\"https://miro.medium.com/max/1080/0*DqHGYPBA-ANwsma2.gif\"\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <h5 style={{ textAlign: \"center\", padding: \"5%\" }}>\r\n              Cart is empty.\r\n            </h5>\r\n          )}\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}